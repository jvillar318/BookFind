package com.example.android.bookfind;

import android.util.Log;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import java.util.ArrayList;

/**
 * Helper methods related to requesting and receiving Book data from google books.
 */
public final class QueryUtils {

    /** Sample JSON response for a google books query */
    private static final String SAMPLE_JSON_RESPONSE = "{\"kind\": \"books#volumes\",\"totalItems\": 956,\"items\": [{\"kind\": \"books#volume\",\"id\": \"39iYWTb6n6cC\",\"etag\": \"s6ENYf9JABc\",\"selfLink\": \"https://www.googleapis.com/books/v1/volumes/39iYWTb6n6cC\",\"volumeInfo\": {\"title\": \"Harry Potter and the Philosopher's Stone\",\"authors\": [\"J.K. Rowling\"],\"publisher\": \"Pottermore\",\"publishedDate\": \"2015-12-08\",\"description\": \"\\\"Turning the envelope over, his hand trembling, Harry saw a purple wax seal bearing a coat of arms; a lion, an eagle, a badger and a snake surrounding a large letter 'H'.\\\" Harry Potter has never even heard of Hogwarts when the letters start dropping on the doormat at number four, Privet Drive. Addressed in green ink on yellowish parchment with a purple seal, they are swiftly confiscated by his grisly aunt and uncle. Then, on Harry's eleventh birthday, a great beetle-eyed giant of a man called Rubeus Hagrid bursts in with some astonishing news: Harry Potter is a wizard, and he has a place at Hogwarts School of Witchcraft and Wizardry. An incredible adventure is about to begin!\",\"industryIdentifiers\": [{\"type\": \"ISBN_13\",\"identifier\": \"9781781100219\"},{\"type\": \"ISBN_10\",\"identifier\": \"1781100217\"}],\"readingModes\": {\"text\": true,\"image\": false},\"pageCount\": 353,\"printType\": \"BOOK\",\"categories\": [\"Juvenile Fiction\"],\"averageRating\": 4.5,\"ratingsCount\": 109,\"maturityRating\": \"NOT_MATURE\",\"allowAnonLogging\": true,\"contentVersion\": \"1.20.19.0.preview.2\",\"panelizationSummary\": {\"containsEpubBubbles\": false,\"containsImageBubbles\": false},\"imageLinks\": {\"smallThumbnail\": \"http://books.google.com/books/content?id=39iYWTb6n6cC&printsec=frontcover&img=1&zoom=5&source=gbs_api\",\"thumbnail\": \"http://books.google.com/books/content?id=39iYWTb6n6cC&printsec=frontcover&img=1&zoom=1&source=gbs_api\"},\"language\": \"en\",\"previewLink\": \"http://books.google.com.ph/books?id=39iYWTb6n6cC&dq=title%3DHarryPotter&hl=&cd=1&source=gbs_api\",\"infoLink\": \"http://books.google.com.ph/books?id=39iYWTb6n6cC&dq=title%3DHarryPotter&hl=&source=gbs_api\",\"canonicalVolumeLink\": \"https://books.google.com/books/about/Harry_Potter_and_the_Philosopher_s_Stone.html?hl=&id=39iYWTb6n6cC\",\"seriesInfo\": {\"kind\": \"books#volume_series_info\",\"shortSeriesBookTitle\": \"Harry Potter and the Philosopher's Stone\",\"bookDisplayNumber\": \"1\",\"volumeSeries\": [{\"seriesId\": \"CSHYFwAAABDQNM\",\"seriesBookType\": \"ISSUE\",\"orderNumber\": 1}]}},\"saleInfo\": {\"country\": \"PH\",\"saleability\": \"NOT_FOR_SALE\",\"isEbook\": false},\"accessInfo\": {\"country\": \"PH\",\"viewability\": \"NO_PAGES\",\"embeddable\": false,\"publicDomain\": false,\"textToSpeechPermission\": \"ALLOWED\",\"epub\": {\"isAvailable\": true},\"pdf\": {\"isAvailable\": true},\"webReaderLink\": \"http://play.google.com/books/reader?id=39iYWTb6n6cC&hl=&printsec=frontcover&source=gbs_api\",\"accessViewStatus\": \"NONE\",\"quoteSharingAllowed\": false},\"searchInfo\": {\"textSnippet\": \"&quot;Turning the envelope over, his hand trembling, Harry saw a purple wax seal bearing a coat of arms; a lion, an eagle, a badger and a snake surrounding a large letter &#39;H&#39;.&quot; Harry Potter has never even heard of Hogwarts when the letters start ...\"}\n" +
            "{\"kind\": \"books#volume\",\"id\": \"FjMbGietIZ4C\",\"etag\": \"OTK7gsDrb7U\",\"selfLink\": \"https://www.googleapis.com/books/v1/volumes/FjMbGietIZ4C\",\"volumeInfo\": {\"title\": \"The Casual Vacancy\",\"authors\": [\"J.K. Rowling\"],\"publisher\": \"Hachette UK\",\"publishedDate\": \"2012-09-27\",\"description\": \"When Barry Fairbrother dies in his early forties, the town of Pagford is left in shock. Pagford is, seemingly, an English idyll, with a cobbled market square and an ancient abbey, but what lies behind the pretty facade is a town at war. Rich at war with poor, teenagers at war with their parents, wives at war with their husbands, teachers at war with their pupils. . . Pagford is not what it first seems. And the empty seat left by Barry on the parish council soon becomes the catalyst for the biggest war the town has yet seen. Who will triumph in an election fraught with passion, duplicity and unexpected revelations? A big novel about a small town, THE CASUAL VACANCY is J.K. Rowling's first novel for adults. It is the work of a storyteller like no other.\",\"industryIdentifiers\": [{\"type\": \"ISBN_13\",\"identifier\": \"9781405519229\"},{\"type\": \"ISBN_10\",\"identifier\": \"1405519223\"}],\"readingModes\": {\"text\": true,\"image\": false},\"pageCount\": 480,\"printType\": \"BOOK\",\"categories\": [\"Fiction\"],\"averageRating\": 3.0,\"ratingsCount\": 593,\"maturityRating\": \"NOT_MATURE\",\"allowAnonLogging\": true,\"contentVersion\": \"1.14.14.0.preview.2\",\"panelizationSummary\": {\"containsEpubBubbles\": false,\"containsImageBubbles\": false},\"imageLinks\": {\"smallThumbnail\": \"http://books.google.com/books/content?id=FjMbGietIZ4C&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api\",\"thumbnail\": \"http://books.google.com/books/content?id=FjMbGietIZ4C&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"},\"language\": \"en\",\"previewLink\": \"http://books.google.com.ph/books?id=FjMbGietIZ4C&printsec=frontcover&dq=title%3DHarryPotter&hl=&cd=2&source=gbs_api\",\"infoLink\": \"https://play.google.com/store/books/details?id=FjMbGietIZ4C&source=gbs_api\",\"canonicalVolumeLink\": \"https://market.android.com/details?id=book-FjMbGietIZ4C\"},\"saleInfo\": {\"country\": \"PH\",\"saleability\": \"FOR_SALE\",\"isEbook\": true,\"listPrice\": {\"amount\": 479.82,\"currencyCode\": \"PHP\"},\"retailPrice\": {\"amount\": 326.28,\"currencyCode\": \"PHP\"},\"buyLink\": \"https://play.google.com/store/books/details?id=FjMbGietIZ4C&rdid=book-FjMbGietIZ4C&rdot=1&source=gbs_api\",\"offers\": [{\"finskyOfferType\": 1,\"listPrice\": {\"amountInMicros\": 4.7982E8,\"currencyCode\": \"PHP\"},\"retailPrice\": {\"amountInMicros\": 3.2628E8,\"currencyCode\": \"PHP\"}}]},\"accessInfo\": {\"country\": \"PH\",\"viewability\": \"PARTIAL\",\"embeddable\": true,\"publicDomain\": false,\"textToSpeechPermission\": \"ALLOWED_FOR_ACCESSIBILITY\",\"epub\": {\"isAvailable\": true,\"acsTokenLink\": \"http://books.google.com.ph/books/download/The_Casual_Vacancy-sample-epub.acsm?id=FjMbGietIZ4C&format=epub&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api\"},\"pdf\": {\"isAvailable\": false},\"webReaderLink\": \"http://play.google.com/books/reader?id=FjMbGietIZ4C&hl=&printsec=frontcover&source=gbs_api\",\"accessViewStatus\": \"SAMPLE\",\"quoteSharingAllowed\": false},\"searchInfo\": {\"textSnippet\": \"Who will triumph in an election fraught with passion, duplicity and unexpected revelations? A big novel about a small town, THE CASUAL VACANCY is J.K. Rowling&#39;s first novel for adults. It is the work of a storyteller like no other.\"}},\n" +
            "{\"kind\": \"books#volume\",\"id\": \"5MQFrgEACAAJ\",\"etag\": \"XO4lPQARmXM\",\"selfLink\": \"https://www.googleapis.com/books/v1/volumes/5MQFrgEACAAJ\",\"volumeInfo\": {\"title\": \"Harry Potter and the Sorcerer's Stone\",\"authors\": [\"J. K. Rowling\"],\"publishedDate\": \"2014-12\",\"industryIdentifiers\": [{\"type\": \"ISBN_10\",\"identifier\": \"1627157727\"},{\"type\": \"ISBN_13\",\"identifier\": \"9781627157728\"}],\"readingModes\": {\"text\": false,\"image\": false},\"printType\": \"BOOK\",\"averageRating\": 4.5,\"ratingsCount\": 1555,\"maturityRating\": \"NOT_MATURE\",\"allowAnonLogging\": false,\"contentVersion\": \"preview-1.0.0\",\"imageLinks\": {\"smallThumbnail\": \"http://books.google.com/books/content?id=5MQFrgEACAAJ&printsec=frontcover&img=1&zoom=5&source=gbs_api\",\"thumbnail\": \"http://books.google.com/books/content?id=5MQFrgEACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api\"},\"language\": \"en\",\"previewLink\": \"http://books.google.com.ph/books?id=5MQFrgEACAAJ&dq=title%3DHarryPotter&hl=&cd=3&source=gbs_api\",\"infoLink\": \"http://books.google.com.ph/books?id=5MQFrgEACAAJ&dq=title%3DHarryPotter&hl=&source=gbs_api\",\"canonicalVolumeLink\": \"https://books.google.com/books/about/Harry_Potter_and_the_Sorcerer_s_Stone.html?hl=&id=5MQFrgEACAAJ\"},\"saleInfo\": {\"country\": \"PH\",\"saleability\": \"NOT_FOR_SALE\",\"isEbook\": false},\"accessInfo\": {\"country\": \"PH\",\"viewability\": \"NO_PAGES\",\"embeddable\": false,\"publicDomain\": false,\"textToSpeechPermission\": \"ALLOWED\",\"epub\": {\"isAvailable\": false},\"pdf\": {\"isAvailable\": false},\"webReaderLink\": \"http://play.google.com/books/reader?id=5MQFrgEACAAJ&hl=&printsec=frontcover&source=gbs_api\",\"accessViewStatus\": \"NONE\",\"quoteSharingAllowed\": false},\"searchInfo\": {\"textSnippet\": \"Rescued from the outrageous neglect of his aunt and uncle, a young boy with a great destiny proves his worth while attending Hogwarts School for Witchcraft and Wizardry.\"}},\n" +
            "{\"kind\": \"books#volume\",\"id\": \"5iTebBW-w7QC\",\"etag\": \"SfcOGeY8HrU\",\"selfLink\": \"https://www.googleapis.com/books/v1/volumes/5iTebBW-w7QC\",\"volumeInfo\": {\"title\": \"Harry Potter and the Chamber of Secrets\",\"authors\": [\"J.K. Rowling\"],\"publisher\": \"Pottermore\",\"publishedDate\": \"2015-12-08\",\"description\": \"\\\"'There is a plot, Harry Potter. A plot to make most terrible things happen at Hogwarts School of Witchcraft and Wizardry this year.'\\\" Harry Potter's summer has included the worst birthday ever, doomy warnings from a house-elf called Dobby, and rescue from the Dursleys by his friend Ron Weasley in a magical flying car! Back at Hogwarts School of Witchcraft and Wizardry for his second year, Harry hears strange whispers echo through empty corridors - and then the attacks start. Students are found as though turned to stone... Dobby's sinister predictions seem to be coming true.\",\"industryIdentifiers\": [{\"type\": \"ISBN_13\",\"identifier\": \"9781781100509\"},{\"type\": \"ISBN_10\",\"identifier\": \"1781100500\"}],\"readingModes\": {\"text\": true,\"image\": true},\"pageCount\": 341,\"printType\": \"BOOK\",\"categories\": [\"Juvenile Fiction\"],\"averageRating\": 4.5,\"ratingsCount\": 2374,\"maturityRating\": \"NOT_MATURE\",\"allowAnonLogging\": true,\"contentVersion\": \"2.15.13.0.preview.3\",\"panelizationSummary\": {\"containsEpubBubbles\": false,\"containsImageBubbles\": false},\"imageLinks\": {\"smallThumbnail\": \"http://books.google.com/books/content?id=5iTebBW-w7QC&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api\",\"thumbnail\": \"http://books.google.com/books/content?id=5iTebBW-w7QC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"},\"language\": \"en\",\"previewLink\": \"http://books.google.com.ph/books?id=5iTebBW-w7QC&printsec=frontcover&dq=title%3DHarryPotter&hl=&cd=4&source=gbs_api\",\"infoLink\": \"http://books.google.com.ph/books?id=5iTebBW-w7QC&dq=title%3DHarryPotter&hl=&source=gbs_api\",\"canonicalVolumeLink\": \"https://books.google.com/books/about/Harry_Potter_and_the_Chamber_of_Secrets.html?hl=&id=5iTebBW-w7QC\",\"seriesInfo\": {\"kind\": \"books#volume_series_info\",\"shortSeriesBookTitle\": \"Harry Potter and the Chamber of Secrets\",\"bookDisplayNumber\": \"2\",\"volumeSeries\": [{\"seriesId\": \"CSHYFwAAABDQNM\",\"seriesBookType\": \"ISSUE\",\"orderNumber\": 4}]}},\"saleInfo\": {\"country\": \"PH\",\"saleability\": \"NOT_FOR_SALE\",\"isEbook\": false},\"accessInfo\": {\"country\": \"PH\",\"viewability\": \"PARTIAL\",\"embeddable\": true,\"publicDomain\": false,\"textToSpeechPermission\": \"ALLOWED\",\"epub\": {\"isAvailable\": true,\"acsTokenLink\": \"http://books.google.com.ph/books/download/Harry_Potter_and_the_Chamber_of_Secrets-sample-epub.acsm?id=5iTebBW-w7QC&format=epub&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api\"},\"pdf\": {\"isAvailable\": true,\"acsTokenLink\": \"http://books.google.com.ph/books/download/Harry_Potter_and_the_Chamber_of_Secrets-sample-pdf.acsm?id=5iTebBW-w7QC&format=pdf&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api\"},\"webReaderLink\": \"http://play.google.com/books/reader?id=5iTebBW-w7QC&hl=&printsec=frontcover&source=gbs_api\",\"accessViewStatus\": \"SAMPLE\",\"quoteSharingAllowed\": false},\"searchInfo\": {\"textSnippet\": \"&quot;&#39;There is a plot, Harry Potter.\"}},\n" +
            "{\"kind\": \"books#volume\",\"id\": \"E5V4zfHYaw0C\",\"etag\": \"fOQJT3dEQt4\",\"selfLink\": \"https://www.googleapis.com/books/v1/volumes/E5V4zfHYaw0C\",\"volumeInfo\": {\"title\": \"Harry, A History - Now Updated with J.K. Rowling Interview, New Chapter & Photos\",\"subtitle\": \"The True Story of a Boy Wizard, His Fans, and Life Inside the Harry Potter Phenomenon\",\"authors\": [\"Melissa Anelli\"],\"publisher\": \"Simon and Schuster\",\"publishedDate\": \"2008-11-04\",\"description\": \"A new enhanced e-book edition, featuring an extended transcript from Melissa Anelli's exclusive interview with J. K. Rowling and a new, updated chapter! Melissa Anelli wears a ring that was a gift to her from J.K. Rowling, given as a measure of appreciation for the work she does on The Leaky Cauldron, where her job entails being a fan, reporter, guardian, and spokesperson for the Harry Potter series. For ten years, millions of fans have lived inside literary history, the only fans to know what it was like when Harry Potter was unfinished. When anticipation for a book was just as likely to cause a charity drive as a pistol shootout. When millions of rabid fans looked to friends, families, neighbors, forums, discussion groups, fan fiction and podcasts to get their fix between novels. When the death of a character was a hotter bet than who'd win the World Series. When one series of books had the power to change the way books are read. This has been a time when a book was more popular than movies, television, and video games. The series has spawned a generation of critical thinkers and new readers. The New York Times changed the way it reported book sales just to avoid a continual overpowering of its bestseller list. These events must be given their proper context, and this moment must be preserved. The series will remain important to literature and pop culture, but the experience will change. Harry's fate will be as commonly known as the identity of Luke Skywalker's father, and readers who never had to wait for a Harry Potter book will have no idea what transpired when the series had hundreds of millions of people waiting desperately for the next volume. We are the first wave of Harry Potter fans, the ones that are living in the time that shapes how Harry Potter will be remembered for all time. But when this era is over, fans will need some way to remember this strange, wonderful, dizzying experience. Future fans, too, will want to know what they missed. Harry Potter will exist as a seven-book series, but without the indivisible story of the cultural, literary and emotional impact the series has made, the story is incomplete. How can a fan understand Harry Potter without hearing about the midnight book parties, the scams, the theories, the burglaries, the bets, the bannings, and most importantly, the worldwide camaraderie spurred on by mutual love of a boy wizard? How can they know how Harry Potter changed and touched the lives of so many without hearing it first hand? Harry, A History tells this story. It tells the personal story of Melissa Anelli's journey through the very heart of Harry Potter fandom. And wraps this phenomenon up into one narrative, factual volume – one book that tells what happened when Harry Potter met the world.\",\"industryIdentifiers\": [{\"type\": \"ISBN_10\",\"identifier\": \"1416594051\"},{\"type\": \"ISBN_13\",\"identifier\": \"9781416594055\"}],\"readingModes\": {\"text\": true,\"image\": false},\"pageCount\": 560,\"printType\": \"BOOK\",\"categories\": [\"Fiction\"],\"averageRating\": 3.5,\"ratingsCount\": 33,\"maturityRating\": \"NOT_MATURE\",\"allowAnonLogging\": true,\"contentVersion\": \"1.4.6.0.preview.2\",\"panelizationSummary\": {\"containsEpubBubbles\": false,\"containsImageBubbles\": false},\"imageLinks\": {\"smallThumbnail\": \"http://books.google.com/books/content?id=E5V4zfHYaw0C&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api\",\"thumbnail\": \"http://books.google.com/books/content?id=E5V4zfHYaw0C&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"},\"language\": \"en\",\"previewLink\": \"http://books.google.com.ph/books?id=E5V4zfHYaw0C&printsec=frontcover&dq=title%3DHarryPotter&hl=&cd=5&source=gbs_api\",\"infoLink\": \"https://play.google.com/store/books/details?id=E5V4zfHYaw0C&source=gbs_api\",\"canonicalVolumeLink\": \"https://market.android.com/details?id=book-E5V4zfHYaw0C\"},\"saleInfo\": {\"country\": \"PH\",\"saleability\": \"FOR_SALE\",\"isEbook\": true,\"listPrice\": {\"amount\": 636.61,\"currencyCode\": \"PHP\"},\"retailPrice\": {\"amount\": 432.89,\"currencyCode\": \"PHP\"},\"buyLink\": \"https://play.google.com/store/books/details?id=E5V4zfHYaw0C&rdid=book-E5V4zfHYaw0C&rdot=1&source=gbs_api\",\"offers\": [{\"finskyOfferType\": 1,\"listPrice\": {\"amountInMicros\": 6.3661E8,\"currencyCode\": \"PHP\"},\"retailPrice\": {\"amountInMicros\": 4.3289E8,\"currencyCode\": \"PHP\"}}]},\"accessInfo\": {\"country\": \"PH\",\"viewability\": \"PARTIAL\",\"embeddable\": true,\"publicDomain\": false,\"textToSpeechPermission\": \"ALLOWED_FOR_ACCESSIBILITY\",\"epub\": {\"isAvailable\": true,\"acsTokenLink\": \"http://books.google.com.ph/books/download/Harry_A_History_Now_Updated_with_J_K_Row-sample-epub.acsm?id=E5V4zfHYaw0C&format=epub&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api\"},\"pdf\": {\"isAvailable\": false},\"webReaderLink\": \"http://play.google.com/books/reader?id=E5V4zfHYaw0C&hl=&printsec=frontcover&source=gbs_api\",\"accessViewStatus\": \"SAMPLE\",\"quoteSharingAllowed\": false},\"searchInfo\": {\"textSnippet\": \"Harry, A History tells this story. It tells the personal story of Melissa Anelli&#39;s journey through the very heart of Harry Potter fandom.\"}},\n" +
            "{\"kind\": \"books#volume\",\"id\": \"uOefAZfsAbgC\",\"etag\": \"Wxh4xI7PtQw\",\"selfLink\": \"https://www.googleapis.com/books/v1/volumes/uOefAZfsAbgC\",\"volumeInfo\": {\"title\": \"The Magical Worlds of Harry Potter (revised edition)\",\"authors\": [\"David Colbert\"],\"publisher\": \"Penguin\",\"publishedDate\": \"2008-05-06\",\"description\": \"This is the indispensable source guide to J.K. Rowling?s Harry Potter novels?revised and updated with information relating to Harry Potter and the Half-Blood Prince and Harry Potter and the Deathly Hallows.\",\"industryIdentifiers\": [{\"type\": \"ISBN_13\",\"identifier\": \"9781440637599\"},{ \"type\": \"ISBN_10\",\"identifier\": \"1440637598\"}],\"readingModes\": {\"text\": true, \"image\": false},\"pageCount\": 336,\"printType\": \"BOOK\",\"categories\": [\"Young Adult Fiction\"],\"averageRating\": 4.0,\"ratingsCount\": 12,\"maturityRating\": \"NOT_MATURE\",\"allowAnonLogging\": true,\"contentVersion\": \"0.0.2.0.preview.2\",\"panelizationSummary\": {\"containsEpubBubbles\": false,\"containsImageBubbles\": false},\"imageLinks\": {\"smallThumbnail\": \"http://books.google.com/books/content?id=uOefAZfsAbgC&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api\",\"thumbnail\": \"http://books.google.com/books/content?id=uOefAZfsAbgC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"},\"language\": \"en\",\"previewLink\": \"http://books.google.com.ph/books?id=uOefAZfsAbgC&printsec=frontcover&dq=title%3DHarryPotter&hl=&cd=6&source=gbs_api\",\"infoLink\": \"https://play.google.com/store/books/details?id=uOefAZfsAbgC&source=gbs_api\",\"canonicalVolumeLink\": \"https://market.android.com/details?id=book-uOefAZfsAbgC\"},\"saleInfo\": {\"country\": \"PH\",\"saleability\": \"FOR_SALE\",\"isEbook\": true,\"listPrice\": {\"amount\": 307.91,\"currencyCode\": \"PHP\"},\"retailPrice\": {\"amount\": 230.93,\"currencyCode\": \"PHP\"},\"buyLink\": \"https://play.google.com/store/books/details?id=uOefAZfsAbgC&rdid=book-uOefAZfsAbgC&rdot=1&source=gbs_api\",\"offers\": [{\"finskyOfferType\": 1,\"listPrice\": {\"amountInMicros\": 3.0791E8,\"currencyCode\": \"PHP\"}, \"retailPrice\": {\"amountInMicros\": 2.3093E8,\"currencyCode\": \"PHP\"}} ]},\"accessInfo\": {\"country\": \"PH\",\"viewability\": \"PARTIAL\",\"embeddable\": true,\"publicDomain\": false,\"textToSpeechPermission\": \"ALLOWED_FOR_ACCESSIBILITY\",\"epub\": {\"isAvailable\": true,\"acsTokenLink\": \"http://books.google.com.ph/books/download/The_Magical_Worlds_of_Harry_Potter_revis-sample-epub.acsm?id=uOefAZfsAbgC&format=epub&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api\"},\"pdf\": {\"isAvailable\": false},\"webReaderLink\": \"http://play.google.com/books/reader?id=uOefAZfsAbgC&hl=&printsec=frontcover&source=gbs_api\",\"accessViewStatus\": \"SAMPLE\",\"quoteSharingAllowed\": false},\"searchInfo\": {\"textSnippet\": \"This is the indispensable source guide to J.K. Rowling?s Harry Potter novels?revised and updated with information relating to Harry Potter and the Half-Blood Prince and Harry Potter and the Deathly Hallows.\"}}," +
            "{\"kind\": \"books#volume\",\"id\": \"2I_5zwnAEZ8C\",\"etag\": \"DqcLeGu3HTM\",\"selfLink\": \"https://www.googleapis.com/books/v1/volumes/2I_5zwnAEZ8C\",\"volumeInfo\": {\"title\": \"Harry Potter's Bookshelf\",\"subtitle\": \"The Great Books behind the Hogwarts Adventures\",\"authors\": [\"John Granger\"], \"publisher\": \"Penguin\",\"publishedDate\": \"2009-07-07\",\"description\": \"Harry Potter. The name conjures up J.K. Rowling's wondrous world of magic that has captured the imaginations of millions on both the printed page and the silver screen with bestselling novels and blockbuster films. The true magic found in this children's fantasy series lies not only in its appeal to people of all ages but in its connection to the greater world of classic literature. Harry Potter's Bookshelf: The Great Books Behind the Hogwarts Adventures explores the literary landscape of themes and genres J.K. Rowling artfully wove throughout her novels-and the influential authors and stories that inspired her. From Jane Austen's Emma and Charles Dickens's class struggles, through the gothic romances of Dracula and Frankenstein and the detective mysteries of Dorothy L. Sayers, to the dramatic alchemy of C.S. Lewis, J.R.R. Tolkien, and William Shakespeare, Rowling cast a powerful spell with the great books of English literature that transformed the story of a young wizard into a worldwide pop culture phenomenon.\",\"industryIdentifiers\": [{\"type\": \"ISBN_13\",\"identifier\": \"9781101133132\"},{\"type\": \"ISBN_10\",\"identifier\": \"1101133139\" }],\"readingModes\": {\"text\": true,\"image\": false},\"pageCount\": 336,\"printType\": \"BOOK\",\"categories\": [\"Social Science\"],\"averageRating\": 4.0,\"ratingsCount\": 7,\"maturityRating\": \"NOT_MATURE\",\"allowAnonLogging\": true,\"contentVersion\": \"0.0.2.0.preview.2\",\"panelizationSummary\": {\"containsEpubBubbles\": false,\"containsImageBubbles\": false},\"imageLinks\": {\"smallThumbnail\": \"http://books.google.com/books/content?id=2I_5zwnAEZ8C&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api\",\"thumbnail\": \"http://books.google.com/books/content?id=2I_5zwnAEZ8C&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"},\"language\": \"en\",\"previewLink\": \"http://books.google.com.ph/books?id=2I_5zwnAEZ8C&printsec=frontcover&dq=title%3DHarryPotter&hl=&cd=7&source=gbs_api\",\"infoLink\": \"https://play.google.com/store/books/details?id=2I_5zwnAEZ8C&source=gbs_api\",\"canonicalVolumeLink\": \"https://market.android.com/details?id=book-2I_5zwnAEZ8C\"},\"saleInfo\": {\"country\": \"PH\",\"saleability\": \"FOR_SALE\",\"isEbook\": true,\"listPrice\": {\"amount\": 846.48,\"currencyCode\": \"PHP\"},\"retailPrice\": {\"amount\": 575.61,\"currencyCode\": \"PHP\"},\"buyLink\": \"https://play.google.com/store/books/details?id=2I_5zwnAEZ8C&rdid=book-2I_5zwnAEZ8C&rdot=1&source=gbs_api\",\"offers\": [{\"finskyOfferType\": 1,\"listPrice\": {\"amountInMicros\": 8.4648E8,\"currencyCode\": \"PHP\"}, \"retailPrice\": {\"amountInMicros\": 5.7561E8,\"currencyCode\": \"PHP\"}}]},\"accessInfo\": {\"country\": \"PH\",\"viewability\": \"PARTIAL\",\"embeddable\": true,\"publicDomain\": false,\"textToSpeechPermission\": \"ALLOWED_FOR_ACCESSIBILITY\",\"epub\": {\"isAvailable\": true,\"acsTokenLink\": \"http://books.google.com.ph/books/download/Harry_Potter_s_Bookshelf-sample-epub.acsm?id=2I_5zwnAEZ8C&format=epub&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api\"},\"pdf\": {\"isAvailable\": false},\"webReaderLink\": \"http://play.google.com/books/reader?id=2I_5zwnAEZ8C&hl=&printsec=frontcover&source=gbs_api\",\"accessViewStatus\": \"SAMPLE\",\"quoteSharingAllowed\": false},\"searchInfo\": {\"textSnippet\": \"Harry Potter&#39;s Bookshelf: The Great Books Behind the Hogwarts Adventures explores the literary landscape of themes and genres J.K. Rowling artfully wove throughout her novels-and the influential authors and stories that inspired her.\"}},\n" +
            "{\"kind\": \"books#volume\",\"id\": \"iO5pApw2JycC\",\"etag\": \"QcQuCPjWguI\",\"selfLink\": \"https://www.googleapis.com/books/v1/volumes/iO5pApw2JycC\",\"volumeInfo\": {\"title\": \"The Ivory Tower and Harry Potter\",\"subtitle\": \"Perspectives on a Literary Phenomenon\",\"authors\": [\"Lana A. Whited\"],\"publisher\": \"University of Missouri Press\",\"publishedDate\": \"2004\",\"description\": \"Now available in paper, The Ivory Tower and Harry Potter is the first book-length analysis of J. K. Rowling's work from a broad range of perspectives within literature, folklore, psychology, sociology, and popular culture. A significant portion of the book explores the Harry Potter series' literary ancestors, including magic and fantasy works by Ursula K. LeGuin, Monica Furlong, Jill Murphy, and others, as well as previous works about the British boarding school experience. Other chapters explore the moral and ethical dimensions of Harry's world, including objections to the series raised within some religious circles. In her new epilogue, Lana A. Whited brings this volume up to date by covering Rowling's latest book, Harry Potter and the Order of the Phoenix.\",\"industryIdentifiers\": [{\"type\": \"ISBN_10\",\"identifier\": \"0826215491\" },{ \"type\": \"ISBN_13\",\"identifier\": \"9780826215499\"}],\"readingModes\": {\"text\": true,\"image\": true },\"pageCount\": 418,\"printType\": \"BOOK\",\"categories\": [\"Literary Criticism\"],\"averageRating\": 4.5,\"ratingsCount\": 13,\"maturityRating\": \"NOT_MATURE\",\"allowAnonLogging\": false,\"contentVersion\": \"2.0.3.0.preview.3\",\"panelizationSummary\": {\"containsEpubBubbles\": false,\"containsImageBubbles\": false},\"imageLinks\": {\"smallThumbnail\": \"http://books.google.com/books/content?id=iO5pApw2JycC&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api\",\"thumbnail\": \"http://books.google.com/books/content?id=iO5pApw2JycC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"},\"language\": \"en\",\"previewLink\": \"http://books.google.com.ph/books?id=iO5pApw2JycC&pg=PA287&dq=title%3DHarryPotter&hl=&cd=8&source=gbs_api\",\"infoLink\": \"http://books.google.com.ph/books?id=iO5pApw2JycC&dq=title%3DHarryPotter&hl=&source=gbs_api\",\"canonicalVolumeLink\": \"https://books.google.com/books/about/The_Ivory_Tower_and_Harry_Potter.html?hl=&id=iO5pApw2JycC\"},\"saleInfo\": {\"country\": \"PH\",\"saleability\": \"NOT_FOR_SALE\",\"isEbook\": false},\"accessInfo\": {\"country\": \"PH\",\"viewability\": \"PARTIAL\",\"embeddable\": true,\"publicDomain\": false,\"textToSpeechPermission\": \"ALLOWED\",\"epub\": { \"isAvailable\": true, \"acsTokenLink\": \"http://books.google.com.ph/books/download/The_Ivory_Tower_and_Harry_Potter-sample-epub.acsm?id=iO5pApw2JycC&format=epub&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api\"},\"pdf\": {\"isAvailable\": false},\"webReaderLink\": \"http://play.google.com/books/reader?id=iO5pApw2JycC&hl=&printsec=frontcover&source=gbs_api\",\"accessViewStatus\": \"SAMPLE\",\"quoteSharingAllowed\": false},\"searchInfo\": {\"textSnippet\": \"The title of the first book in German mirrors the British title, The Philosopher&#39;s \\u003cbr\\u003e\\nStone, the German equivalent of which is Der Stein der Weisen, but the second \\u003cbr\\u003e\\nbook&#39;s \\u003cb\\u003etitle\\u003c/b\\u003e, \\u003cb\\u003eHarry Potter\\u003c/b\\u003e und die Kammer des Schreckens (Harry Potter and the&nbsp;...\"}},\n" +
            "{\"kind\": \"books#volume\",\"id\": \"tcSMCwAAQBAJ\",\"etag\": \"kv3iOqGjgzs\",\"selfLink\": \"https://www.googleapis.com/books/v1/volumes/tcSMCwAAQBAJ\",\"volumeInfo\": {\"title\": \"Harry Potter and the Cursed Child – Parts One and Two (Special Rehearsal Edition)\",\"authors\": [\"J.K. Rowling\",\"John Tiffany\",\"Jack Thorne\"],\"publisher\": \"Pottermore\",\"publishedDate\": \"2016-07-31\",\"description\": \"Based on an original new story by J.K. Rowling, Jack Thorne and John Tiffany, a new play by Jack Thorne, Harry Potter and the Cursed Child is the eighth story in the Harry Potter series and the first official Harry Potter story to be presented on stage. The play received its world premiere in London’s West End on 30th July 2016. It was always difficult being Harry Potter and it isn’t much easier now that he is an overworked employee of the Ministry of Magic, a husband and father of three school-age children. While Harry grapples with a past that refuses to stay where it belongs, his youngest son Albus must struggle with the weight of a family legacy he never wanted. As past and present fuse ominously, both father and son learn the uncomfortable truth: sometimes, darkness comes from unexpected places.\",\"industryIdentifiers\": [{\"type\": \"ISBN_13\",\"identifier\": \"9781781107041\"},{\"type\": \"ISBN_10\",\"identifier\": \"1781107041\"}],\"readingModes\": {\"text\": true,\"image\": true},\"pageCount\": 320,\"printType\": \"BOOK\",\"categories\": [\"Drama\"],\"averageRating\": 3.5,\"ratingsCount\": 38,\"maturityRating\": \"NOT_MATURE\",\"allowAnonLogging\": true,\"contentVersion\": \"1.2.2.0.preview.3\",\"panelizationSummary\": {\"containsEpubBubbles\": false,\"containsImageBubbles\": false},\"imageLinks\": {\"smallThumbnail\": \"http://books.google.com/books/content?id=tcSMCwAAQBAJ&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api\",\"thumbnail\": \"http://books.google.com/books/content?id=tcSMCwAAQBAJ&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"},\"language\": \"en\",\"previewLink\": \"http://books.google.com.ph/books?id=tcSMCwAAQBAJ&printsec=frontcover&dq=title%3DHarryPotter&hl=&cd=9&source=gbs_api\",\"infoLink\": \"http://books.google.com.ph/books?id=tcSMCwAAQBAJ&dq=title%3DHarryPotter&hl=&source=gbs_api\",\"canonicalVolumeLink\": \"https://books.google.com/books/about/Harry_Potter_and_the_Cursed_Child_Parts.html?hl=&id=tcSMCwAAQBAJ\",\"seriesInfo\": {\"kind\": \"books#volume_series_info\",\"bookDisplayNumber\": \"8\",\"volumeSeries\": [{\"seriesId\": \"CSHYFwAAABDQNM\",\"seriesBookType\": \"ISSUE\",\"orderNumber\": 15} ]} },\"saleInfo\": {\"country\": \"PH\",\"saleability\": \"NOT_FOR_SALE\",\"isEbook\": false},\"accessInfo\": {\"country\": \"PH\",\"viewability\": \"PARTIAL\",\"embeddable\": true,\"publicDomain\": false,\"textToSpeechPermission\": \"ALLOWED\",\"epub\": {\"isAvailable\": true,\"acsTokenLink\": \"http://books.google.com.ph/books/download/Harry_Potter_and_the_Cursed_Child_Parts-sample-epub.acsm?id=tcSMCwAAQBAJ&format=epub&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api\"},\"pdf\": {\"isAvailable\": true,\"acsTokenLink\": \"http://books.google.com.ph/books/download/Harry_Potter_and_the_Cursed_Child_Parts-sample-pdf.acsm?id=tcSMCwAAQBAJ&format=pdf&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api\"},\"webReaderLink\": \"http://play.google.com/books/reader?id=tcSMCwAAQBAJ&hl=&printsec=frontcover&source=gbs_api\",\"accessViewStatus\": \"SAMPLE\",\"quoteSharingAllowed\": false},\"searchInfo\": {\"textSnippet\": \"Based on an original new story by J.K. Rowling, Jack Thorne and John Tiffany, a new play by Jack Thorne, Harry Potter and the Cursed Child is the eighth story in the Harry Potter series and the first official Harry Potter story to be ...\"}}," +
            "{\"kind\": \"books#volume\",\"id\": \"oNAzDwAAQBAJ\",\"etag\": \"Q0YH54y2qwg\",\"selfLink\": \"https://www.googleapis.com/books/v1/volumes/oNAzDwAAQBAJ\",\"volumeInfo\": {\"title\": \"J.K. Rowling: A Bibliography\",\"subtitle\": \"Updated Edition\",\"authors\": [\"Philip W. Errington\"],\"publisher\": \"Bloomsbury Publishing\",\"publishedDate\": \"2017-09-21\",\"description\": \"This is the definitive bibliography of the writings of J. K. Rowling. In addition to bibliographical details of each edition of all her books, pamphlets and original contributions to published works, there is detailed information on the publishing history of her work, including fascinating extracts from correspondence, and information on Rowling at auction. This edition has been fully revised and updated to include over 50 new editions published since 2013, including the newly jacketed 2014 children's editions of the Harry Potter books as well as the 2015 illustrated edition of Harry Potter and the Philosopher's Stone. The works of Robert Galbraith are also included.\",\"industryIdentifiers\": [{\"type\": \"ISBN_13\",\"identifier\": \"9781474297387\"},{\"type\": \"ISBN_10\",\"identifier\": \"1474297382\"}],\"readingModes\": {\"text\": true,\"image\": true},\"pageCount\": 736,\"printType\": \"BOOK\",\"categories\": [\"Fiction\"],\"averageRating\": 5.0,\"ratingsCount\": 1,\"maturityRating\": \"NOT_MATURE\",\"allowAnonLogging\": false,\"contentVersion\": \"1.1.1.0.preview.3\",\"panelizationSummary\": {\"containsEpubBubbles\": false,\"containsImageBubbles\": false},\"imageLinks\": {\"smallThumbnail\": \"http://books.google.com/books/content?id=oNAzDwAAQBAJ&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api\",\"thumbnail\": \"http://books.google.com/books/content?id=oNAzDwAAQBAJ&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"},\"language\": \"en\",\"previewLink\": \"http://books.google.com.ph/books?id=oNAzDwAAQBAJ&printsec=frontcover&dq=title%3DHarryPotter&hl=&cd=10&source=gbs_api\",\"infoLink\": \"https://play.google.com/store/books/details?id=oNAzDwAAQBAJ&source=gbs_api\",\"canonicalVolumeLink\": \"https://market.android.com/details?id=book-oNAzDwAAQBAJ\"},\"saleInfo\": {\"country\": \"PH\",\"saleability\": \"FOR_SALE\",\"isEbook\": true,\"listPrice\": {\"amount\": 1471.54,\"currencyCode\": \"PHP\"},\"retailPrice\": {\"amount\": 1030.08,\"currencyCode\": \"PHP\"},\"buyLink\": \"https://play.google.com/store/books/details?id=oNAzDwAAQBAJ&rdid=book-oNAzDwAAQBAJ&rdot=1&source=gbs_api\",\"offers\": [{\"finskyOfferType\": 1,\"listPrice\": {\"amountInMicros\": 1.47154E9,\"currencyCode\": \"PHP\"},\"retailPrice\": {\"amountInMicros\": 1.03008E9,\"currencyCode\": \"PHP\"}}]},\"accessInfo\": {\"country\": \"PH\",\"viewability\": \"PARTIAL\",\"embeddable\": true,\"publicDomain\": false,\"textToSpeechPermission\": \"ALLOWED\",\"epub\": {\"isAvailable\": true,\"acsTokenLink\": \"http://books.google.com.ph/books/download/J_K_Rowling_A_Bibliography-sample-epub.acsm?id=oNAzDwAAQBAJ&format=epub&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api\"},\"pdf\": {\"isAvailable\": true,\"acsTokenLink\": \"http://books.google.com.ph/books/download/J_K_Rowling_A_Bibliography-sample-pdf.acsm?id=oNAzDwAAQBAJ&format=pdf&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api\"},\"webReaderLink\": \"http://play.google.com/books/reader?id=oNAzDwAAQBAJ&hl=&printsec=frontcover&source=gbs_api\",\"accessViewStatus\": \"SAMPLE\",\"quoteSharingAllowed\": false},\"searchInfo\": {\"textSnippet\": \"This is the definitive bibliography of the writings of J. K. Rowling.\"}}]}";

    /**
     * Create a private constructor because no one should ever create a {@link QueryUtils} object.
     * This class is only meant to hold static variables and methods, which can be accessed
     * directly from the class name QueryUtils (and an object instance of QueryUtils is not needed).
     */
    private QueryUtils() {
    }

    /**
     * Return a list of {@link Book} objects that has been built up from
     * parsing a JSON response.
     */
    public static ArrayList<Book> extractBooks() {

        // Create an empty ArrayList that we can start adding Books to
        ArrayList<Book>books = new ArrayList<>();

        // Try to parse the SAMPLE_JSON_RESPONSE. If there's a problem with the way the JSON
        // is formatted, a JSONException exception object will be thrown.
        // Catch the exception so the app doesn't crash, and print the error message to the logs.
        try {

            // TODO: Parse the response given by the SAMPLE_JSON_RESPONSE string and
            // build up a list of Book objects with the corresponding data.
            JSONObject baseJsonResponse = new JSONObject(SAMPLE_JSON_RESPONSE);
            JSONArray bookArray = baseJsonResponse.getJSONArray("items");

            for (int i = 0; i < bookArray.length(); i++){
                JSONObject currentBook = bookArray.getJSONObject(i);
                JSONObject volumeInfo = currentBook.getJSONObject("volumeInfo");
                String title = volumeInfo.getString("title");
                String author;
                if (volumeInfo.has("authors")){
                    JSONArray authors  = volumeInfo.getJSONArray("authors");
                    author = authors.getString(0);
                }else {
                    author = "Not Available";
                }
                String publisher;
                if (volumeInfo.has("publisher")){
                    publisher = volumeInfo.getString("publisher");
                }else {
                    publisher = "Not Available";
                }
                String publishedDate;
                if (volumeInfo.has("publishedDate")){
                    publishedDate = volumeInfo.getString("publishedDate");
                } else {
                    publishedDate = "Not Available";
                }

                Book book = new Book(title, author, publisher, publishedDate);
                books.add(book);
            }

        } catch (JSONException e) {
            // If an error is thrown when executing any of the above statements in the "try" block,
            // catch the exception here, so the app doesn't crash. Print a log message
            // with the message from the exception.
            Log.e("QueryUtils", "Problem parsing the Book JSON results", e);
        }

        // Return the list of Books
        return books;
    }

}